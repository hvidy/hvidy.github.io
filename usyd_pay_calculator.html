<!DOCTYPE html>

<html lang="en">
<head>

    <!-- Basic Page Needs–––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta charset="utf-8">
    <title>USyd EBA Pay Offer Calculator</title>
    <meta name="description" content="">

    <!-- CSS–––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="stylesheet" href="new.css">
    
    <!-- Scripts–––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    
    <!-- Favicon  -->
    <link rel="icon" type="image/jpg" href="icon.jpg">
    
</head>

<body>
  <!-- Primary Page Layout–––––––––––––––––––––––––––––––––––––––––––––––––– -->

<h1>Pay Offer Calculator &mdash; University of Sydney</h1>
<p>Select a Pay Grade from the menu below to see how gross income varies under different scenarios:
  <ul>
    <li>The University's pay offer of 21 February 2023</li>
    <li>If pay keeps up with inflation</li>
    <li>If the percentage pay increases match those in the Western Sydney University Agreement</li>
    <li>If the percentage pay increases match those in the University of Tasmania Agreement</li>
    <li>If the percentage pay increases match those in the Australian Catholic University Agreement</li>
  </ul>
</p>

  <div id="barplots">
    <div class="barplot", data-num="0">
      <div class="control-row">
        <p>Pay Grade: <select class="payleveldata"></select></p>
      </div>
      <div class="plot" id="content"></div>
      <div class="plot" id="content-yearly"></div>
      <p id="content-totals"></div>
    </div>
  </div>

<p>
<h2>Notes</h2>
<ul>
  <li>All payments are before tax.</li>
  <li>Professional Staff salaries are shown for a 35 hour week.</li>
  <li>The 2023 pay increase for the USyd Offer is calculated as if it occurs for the <i>current</i> pay period, instead of the first pay period following the commencement of the new agreement, because we do not yet know when agreement will be reached. This has the effect of inflating the value of the University's offer.</li>
  <li>The one-off payments of $1000 in 2022 and proposed $2000 on agreement are included in the yearly and 5-yearly totals, but not in the chart of pay per fortnight.</li>
  <li>The effects of promotions and yearly progression up steps within paygrades are not included.</li>
  <li>Employer superannuation contributions are determined as a percentage of salary, so a lower salary results in smaller contributions. The effects of this are not included.</li>
  <li>The salary increases for the Predicted CPI salary are the percentage increases in the Consumer Price Index for the June Reference Quarter, as <a href="https://www.abs.gov.au/statistics/economy/price-indexes-and-inflation/consumer-price-index-australia/latest-release" class="ext">reported by the Australian Bureau of Statisics</a> for June 2022 or as <a href="https://www.rba.gov.au/publications/smp/2023/feb/forecasts.html" class="ext">forecast by the Reserve Bank of Australia</a> for future periods. The salary increases come into effect from the first pay period in July. This mirrors the salary increase calculation for the University of Canberra from their 2019-2022 Enterprise Agreement, which had increases matching CPI paid in January of each year equal to the CPI percentage increase from the preceeding December quarter. See <a href="https://www.fwc.gov.au/document-search/view/3/aHR0cHM6Ly9zYXNyY2RhdGFwcmRhdWVhYS5ibG9iLmNvcmUud2luZG93cy5uZXQvZW50ZXJwcmlzZWFncmVlbWVudHMvMjAxOS82L2FlNTA0MTIzLnBkZg2?sid=&q=18.%24%24salary%24%24increases" class="ext">clause 18 of the University of Canberra Enterprise Agreement 2019 - 2022</a>.</li>
  <li>The salaries shown for the Western Sydney University (WSU), University of Tasmania (UTas), and Australian Catholic University (ACU) agreements are what University of Sydney salaries would be if the same percentage pay increases are applied at the same dates as set out in those agreements. These agreements may be found at the Fair Work Commission website:
    <ul>
      <li><a href="https://www.fwc.gov.au/document-search/view/3/aHR0cHM6Ly9zYXNyY2RhdGFwcmRhdWVhYS5ibG9iLmNvcmUud2luZG93cy5uZXQvZW50ZXJwcmlzZWFncmVlbWVudHMvMjAyMi8xMi9BRTUxODUyOS5wZGY1" class="ext">Western Sydney University - Academic Staff</a></li>
      <li><a href="https://www.fwc.gov.au/document-search/view/3/aHR0cHM6Ly9zYXNyY2RhdGFwcmRhdWVhYS5ibG9iLmNvcmUud2luZG93cy5uZXQvZW50ZXJwcmlzZWFncmVlbWVudHMvMjAyMi8xMi9BRTUxODUxMS5wZGY1" class="ext">Western Sydney University - Professional Staff</a></li>
      <li><a href="https://www.fwc.gov.au/document-search/view/3/aHR0cHM6Ly9zYXNyY2RhdGFwcmRhdWVhYS5ibG9iLmNvcmUud2luZG93cy5uZXQvZW50ZXJwcmlzZWFncmVlbWVudHMvMjAyMy8xL0FFNTE5MDI3LnBkZg2" class="ext">University of Tasmania</a></li>
      <li><a href="https://www.fwc.gov.au/document-search/view/3/aHR0cHM6Ly9zYXNyY2RhdGFwcmRhdWVhYS5ibG9iLmNvcmUud2luZG93cy5uZXQvZW50ZXJwcmlzZWFncmVlbWVudHMvMjAyMy8yL0FFNTE5MDUzLnBkZg2" class="ext">Australian Catholic University</a></li>
    </ul>
    At the time of writing, no other university has its new enterprise agreement available on the Fair Work Comission website, so they are not included.
  </li>
  <li>While the University of Sydney's pay offer includes another pay increase in July 2026, the other university agreements expire before this time, so it is not possible to do a comparision for Financial Year 2027.</li>
</ul>
</p>

</body>

<!--
Agreements:
ACU - https://www.fwc.gov.au/document-search/view/3/aHR0cHM6Ly9zYXNyY2RhdGFwcmRhdWVhYS5ibG9iLmNvcmUud2luZG93cy5uZXQvZW50ZXJwcmlzZWFncmVlbWVudHMvMjAyMy8yL0FFNTE5MDUzLnBkZg2
WSU - Academic - https://www.fwc.gov.au/document-search/view/3/aHR0cHM6Ly9zYXNyY2RhdGFwcmRhdWVhYS5ibG9iLmNvcmUud2luZG93cy5uZXQvZW50ZXJwcmlzZWFncmVlbWVudHMvMjAyMi8xMi9BRTUxODUyOS5wZGY1
Professional - https://www.fwc.gov.au/document-search/view/3/aHR0cHM6Ly9zYXNyY2RhdGFwcmRhdWVhYS5ibG9iLmNvcmUud2luZG93cy5uZXQvZW50ZXJwcmlzZWFncmVlbWVudHMvMjAyMi8xMi9BRTUxODUxMS5wZGY1
UTas - https://www.fwc.gov.au/document-search/view/3/aHR0cHM6Ly9zYXNyY2RhdGFwcmRhdWVhYS5ibG9iLmNvcmUud2luZG93cy5uZXQvZW50ZXJwcmlzZWFncmVlbWVudHMvMjAyMy8xL0FFNTE5MDI3LnBkZg2

UniCanberra - https://www.fwc.gov.au/document-search/view/3/aHR0cHM6Ly9zYXNyY2RhdGFwcmRhdWVhYS5ibG9iLmNvcmUud2luZG93cy5uZXQvZW50ZXJwcmlzZWFncmVlbWVudHMvMjAxOS82L2FlNTA0MTIzLnBkZg2
-->

<!-- <div>
  <ul class="ruler" id="mydiv" data-items="10"></ul>
</div>
 -->

<!-- <div>
  <div class="slidecontainer">
    <input type="range" min="1" max="15" value="1" class="slider" id="spacing" step=0.25>
  </div>
</div>

 -->
<!-- Scripts! ––––––––––––––––––––––––––––––––––––––––––––––––––-->
<script>

//Called when the program first opens
// window.onload = function() {

  //Instantiate the chart and bind it to content html
  // var graphDiv = document.getElementById('content');

  var date_df = 'data/dates.csv';
  var xDateSeriesName = 'date';
  var yDateSeriesName = 'idx';

  var salary_df = 'data/pay_levels.csv';

  var d3 = Plotly.d3;

  var gd3 = d3.select("div[id='content']");

  var content = gd3.node();

  Plotly.d3.csv(salary_df, function(err, rows){

    function unpack(rows, key) {
      return rows.map(function(row) {return row[key];});
    }

    var allPay = unpack(rows,'salary'),
        allPayLevels = unpack(rows,'code'),
        listofPayLevels = [],
        currentPayLevel,
        currentPay = [],
        dates = [];


    for (var i = 0; i < allPayLevels.length; i++){
      if (listofPayLevels.indexOf(allPayLevels[i]) === -1){
        listofPayLevels.push(allPayLevels[i]);
      }
    }

    function getPayLevelData(chosenPayLevel) {
      currentPay = [];
      currentPayLevel = chosenPayLevel
      for (var i = 0; i < allPayLevels.length; i++){
        if (allPayLevels[i] === chosenPayLevel) {
          currentPay.push(allPay[i]);
        }
      }
    };

    function getDateData() {
      Plotly.d3.csv(date_df, function(data){

        processData(data,xDateSeriesName)


      });
    }

    function processData(allRows,xLabel) {
      var dates =[];

      for (var i = 0; i < allRows.length; i++) {
        row = allRows[i]
        dates.push(row[xLabel]);
      }

      var usyd_payments = [];
      var today = new Date().toISOString().slice(0,10);
      for (var i = 0; i < dates.length; i++) {
        pay = currentPay
        if (dates[i] > '2022-07-02') {
          pay = Math.round(pay*1.021)
        }
        if (dates[i] > today) {
          pay = Math.round(pay*1.046)
        }
        if (dates[i] > '2024-07-01') {
          pay = Math.round(pay*1.0325)
        }
        if (dates[i] > '2025-07-01') {
          pay = Math.round(pay*1.0325)
        }
        if (dates[i] > '2026-07-01') {
          pay = Math.round(pay*1.035)
        }
        fortnight_pay = pay/365.25*14
        usyd_payments.push(fortnight_pay.toFixed(2));
      }

      var inflation_payments = []
      for (var i = 0; i < dates.length; i++) {
        pay = currentPay
        if (dates[i] > '2022-07-01') {
          pay = Math.round(pay*1.061)
        }
        if (dates[i] > '2023-07-01') {
          pay = Math.round(pay*1.067)
        }
        if (dates[i] > '2024-07-01') {
          pay = Math.round(pay*1.036)
        }
        if (dates[i] > '2025-07-01') {
          pay = Math.round(pay*1.03)
        }
        // if (dates[i] > '2026-07-01') {
        //   pay = Math.round(pay*1.025)
        // }
        fortnight_pay = pay/365.25*14
        inflation_payments.push(fortnight_pay.toFixed(2));
      }

      var wsu_payments = []
      for (var i = 0; i < dates.length; i++) {
        pay = currentPay
        if (dates[i] > '2022-04-29') {
          pay = Math.round(pay*1.02)
        }
        if (dates[i] > '2022-10-14') {
          pay = Math.round(pay*1.026)
        }
        if (dates[i] > '2023-10-01') {
          pay = Math.round(pay*1.0335)
        }
        if (dates[i] > '2024-10-01') {
          pay = Math.round(pay*1.029)
        }
        if (dates[i] > '2025-03-01') {
          pay = Math.round(pay*1.026)
        }
        fortnight_pay = pay/365.25*14
        wsu_payments.push(fortnight_pay.toFixed(2));
      }    

      var utas_payments = []
      for (var i = 0; i < dates.length; i++) {
        pay = currentPay
        if (dates[i] > '2022-07-06') {
          pay = Math.round(pay*1.046)
        }
        if (dates[i] > '2023-07-01') {
          pay = Math.round(pay*1.03)
        }
        if (dates[i] > '2024-07-01') {
          pay = Math.round(pay*1.025)
        }
        if (dates[i] > '2025-06-15') {
          pay = Math.round(pay*1.034)
        }
        fortnight_pay = pay/365.25*14
        utas_payments.push(fortnight_pay.toFixed(2));
      }

      var uplift = 0
      if (currentPayLevel.slice(0,1) == 'A'){
        uplift = 1000
      } 
      if (currentPayLevel.slice(0,1) == 'H'){
        if (currentPayLevel.slice(3,6) < 6){
          uplift = 1000
        }
        if (currentPayLevel.slice(3,6) > 6 && currentPayLevel.slice(3,6) < 8){
          uplift = 500
        }
      }

      var acu_payments = []
      for (var i = 0; i < dates.length; i++) {
        pay = currentPay
        if (dates[i] > '2022-07-09') {
          pay = Math.round(pay*1.022)
        }
        if (dates[i] > '2023-01-01') {
          pay = Math.round((pay+uplift)*1.028)
        }
        if (dates[i] > '2024-01-01') {
          pay = Math.round(pay*1.0375)
        }
        if (dates[i] > '2025-01-01') {
          pay = Math.round(pay*1.03)
        }
        if (dates[i] > '2025-06-30') {
          pay = Math.round(pay*1.028)
        }
        fortnight_pay = pay/365.25*14
        acu_payments.push(fortnight_pay.toFixed(2));
      }

      var trace1 = {
        x: dates,
        y: usyd_payments,
        name: 'USyd Offer',
        mode: 'bar'
      };

      var trace2 = {
        x: dates,
        y: inflation_payments,
        name: 'Predicted CPI',
        mode: 'bar'
      };

      var trace3 = {
        x: dates,
        y: wsu_payments,
        name: 'WSU Agreement',
        mode: 'bar'
      };

      var trace4 = {
        x: dates,
        y: utas_payments,
        name: 'UTas Agreement',
        mode: 'bar'
      };

      var trace5 = {
        x: dates,
        y: acu_payments,
        name: 'ACU Agreement',
        mode: 'bar'
      };

      var data = [trace1, trace2, trace3, trace4, trace5];

      var layout = {
        xaxis:{
          title: 'Pay date'
        },
        yaxis:{
          title: 'Gross pay per fortnight ($)',
          // rangemode: 'tozero',
          autorange: true
        }
      }

      Plotly.newPlot('content', data, layout)


      // Calculate totals by FY and over period
      var usyd_yearly = [],
          utas_yearly = [],
          wsu_yearly = [],
          acu_yearly = [],
          inflation_yearly = [],
          usyd_total = 0,
          utas_total = 0,
          wsu_total = 0,
          acu_total = 0,
          inflation_total = 0,
          finyear = [];

      for (var fy = 22; fy < 27; fy++) {
        finyear.push('FY'+fy)

        start_date = fy+1999+'-07-01'
        end_date = fy+2000+'-06-30'
        
        start_index = dates.findIndex(checkStart);
        end_index = dates.findIndex(checkEnd);
        if (end_index == -1){
          end_index = dates.length
        }

        sum = usyd_payments.slice(start_index,end_index).reduce((partialSum, a) => partialSum + parseFloat(a), 0);
        if (fy == 22){
          sum += 1000;
        }
        if (fy == 23){
          sum += 2000;
        }
        usyd_yearly.push(sum);
        usyd_total += sum;

        sum = utas_payments.slice(start_index,end_index).reduce((partialSum, a) => partialSum + parseFloat(a), 0);
        utas_yearly.push(sum);
        utas_total += sum;

        sum = wsu_payments.slice(start_index,end_index).reduce((partialSum, a) => partialSum + parseFloat(a), 0);
        wsu_yearly.push(sum);
        wsu_total += sum;

        sum = acu_payments.slice(start_index,end_index).reduce((partialSum, a) => partialSum + parseFloat(a), 0);
        acu_yearly.push(sum);
        acu_total += sum;

        sum = inflation_payments.slice(start_index,end_index).reduce((partialSum, a) => partialSum + parseFloat(a), 0);
        inflation_yearly.push(sum);
        inflation_total += sum;
      }

      function checkStart(date){
        return date > start_date;
      }

      function checkEnd(date){
        return date > end_date;
      }

      var traceA = {
        x: finyear,
        y: usyd_yearly,
        name: 'USyd Offer',
        type: 'bar'
      };

      var traceB = {
        x: finyear,
        y: inflation_yearly,
        name: 'Predicted CPI',
        type: 'bar'
      };

      var traceC = {
        x: finyear,
        y: wsu_yearly,
        name: 'WSU Agreement',
        type: 'bar'
      };

      var traceD = {
        x: finyear,
        y: utas_yearly,
        name: 'UTas Agreement',
        type: 'bar'
      };

      var traceE = {
        x: finyear,
        y: acu_yearly,
        name: 'ACU Agreement',
        type: 'bar'
      };

      var data2 = [traceA, traceB, traceC, traceD, traceE];

      var layout2 = {
        xaxis:{
          title: 'Financial Year'
        },
        yaxis:{
          title: 'Gross pay per financial year ($)',
          // rangemode: 'tozero',
          autorange: true
        },
        barmode: 'group'
      }

      Plotly.newPlot('content-yearly', data2, layout2)

      document.getElementById('content-totals').innerHTML =
      "<h2>Total earnings (July 2021 &ndash; June 2026)</h2>" +
      "<b>USyd Offer: </b> $" + parseFloat(usyd_total.toFixed(2)) + "<br><br>" +
      "<b>Predicted CPI: </b> $" + parseFloat(inflation_total.toFixed(2)) + "<br>" +
      "<b>USyd Offer - Predicted CPI: " + difference(usyd_total.toFixed(2),inflation_total.toFixed(2)) + "<br><br>"
      "<b>WSU Agreement: </b> $" + parseFloat(wsu_total.toFixed(2)) + "<br>" +
      "<b>USyd Offer - WSU Agreement: " + difference(usyd_total.toFixed(2),wsu_total.toFixed(2)) + "<br><br>"
      "<b>UTas Agreement: </b> $" + parseFloat(utas_total.toFixed(2)) + "<br>" +
      "<b>USyd Offer - UTas Agreement: " + difference(usyd_total.toFixed(2),utas_total.toFixed(2)) + "<br><br>"
      "<b>ACU Agreement: </b> $" + parseFloat(acu_total.toFixed(2)) + "<br>"
      "<b>USyd Offer - ACU Agreement: " + difference(usyd_total.toFixed(2),acu_total.toFixed(2));

      function difference(value1, value2) {
        result = value1 - value2;
        if (result < 0) {
          resultString = "<p style='color:red'> -$"+parseFloat(Math.abs(result))+"</p>";
        } else {
          resultString = "<p style='color:black'> +$"+parseFloat(result)+"</p>";
        }
        return resultString;
      }



    }

    //Default Pay Level
    setBarPlot('A1');

    function setBarPlot(chosenPayLevel) {
      getPayLevelData(chosenPayLevel);
      getDateData();


  };

  var innerContainer = document.querySelector('[data-num="0"'),
      plotEl = innerContainer.querySelector('.plot'),
      payLevelSelector = innerContainer.querySelector('.payleveldata');

  function assignOptions(textArray, selector) {
    for (var i = 0; i < textArray.length; i++) {
      var currentOption = document.createElement('option');
      currentOption.text = textArray[i];
      selector.appendChild(currentOption);
    }
  }

  assignOptions(listofPayLevels, payLevelSelector);

  function updatePayLevel(){
    setBarPlot(payLevelSelector.value);
  }

  payLevelSelector.addEventListener('change', updatePayLevel, false);


  });


//instruction resizes plot
window.onresize = function() {
  Plotly.Plots.resize(content);
  Plotly.Plots.resize('content-yearly');
};


</script>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>